<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Calculator Vault</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/vault.css">
    <link rel="stylesheet" href="css/admin.css">
    
    <!-- Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    
    <!-- Favicon -->
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Warning Banner -->
    <div class="admin-warning">
        ⚠️ <strong>ADMIN ACCESS ONLY</strong> - This panel is not linked from the main site for security.
    </div>
    
    <!-- Admin Header -->
    <header class="admin-header">
        <h1>Calculator Vault - Admin Panel</h1>
        <div class="admin-subtitle">Manage PIN and vault content securely</div>
    </header>
    
    <!-- Main Container -->
    <div class="container" style="max-width: 900px;">
        <!-- Admin Navigation -->
        <nav class="admin-nav">
            <button class="admin-nav-btn active" data-section="pin">Change PIN</button>
            <button class="admin-nav-btn" data-section="content">Manage Content</button>
            <button class="admin-nav-btn" data-section="instructions">Instructions</button>
        </nav>
        
        <!-- 1. CHANGE PIN SECTION -->
        <section id="pinSection" class="admin-section active">
            <h2>Change Vault PIN</h2>
            
            <form id="pinForm" class="admin-form">
                <div class="form-group">
                    <label class="form-label" for="currentPIN">Current PIN</label>
                    <input type="password" id="currentPIN" class="form-input" 
                           placeholder="Enter current 4-digit PIN" maxlength="4" pattern="\d{4}">
                    <div class="form-help">Enter the current vault PIN to authorize changes</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="newPIN">New PIN</label>
                    <input type="password" id="newPIN" class="form-input" 
                           placeholder="Enter new 4-digit PIN" maxlength="4" pattern="\d{4}">
                    <div class="form-help">Choose a new 4-digit PIN (numbers only)</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="confirmPIN">Confirm New PIN</label>
                    <input type="password" id="confirmPIN" class="form-input" 
                           placeholder="Confirm new 4-digit PIN" maxlength="4" pattern="\d{4}">
                    <div class="form-help">Re-enter the new PIN to confirm</div>
                </div>
                
                <div id="pinMessage" class="form-help" style="text-align: center; margin-top: 20px;"></div>
                
                <button type="submit" class="btn-admin">Update PIN</button>
            </form>
            
            <div class="instructions-box">
                <h3>PIN Security Tips:</h3>
                <ul>
                    <li>Don't use obvious PINs like 1234, 0000, or 2580</li>
                    <li>Avoid using personal numbers (birthdates, anniversaries)</li>
                    <li>Consider using a random 4-digit combination</li>
                    <li>Remember: If you forget the PIN, you'll lose access to the vault</li>
                    <li>The default PIN is <strong>1234</strong> if you haven't changed it</li>
                </ul>
            </div>
        </section>
        
        <!-- 2. MANAGE CONTENT SECTION -->
        <section id="contentSection" class="admin-section">
            <h2>Manage Vault Content</h2>
            
            <!-- Add Content Form -->
            <div class="instructions-box">
                <h3>Add Google Drive Content</h3>
                
                <form id="addContentForm" class="admin-form">
                    <div class="form-group">
                        <label class="form-label" for="driveLink">Google Drive Link</label>
                        <input type="text" id="driveLink" class="form-input" 
                               placeholder="https://drive.google.com/file/d/FILE_ID/view">
                        <div class="form-help">
                            Paste the Google Drive share link (must be set to "Anyone with the link")
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="fileName">Display Name</label>
                        <input type="text" id="fileName" class="form-input" 
                               placeholder="Enter a name for this file">
                        <div class="form-help">
                            This name will appear in the vault (e.g., "Vacation Photo 2023")
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="contentCategory">Category</label>
                        <select id="contentCategory" class="form-input">
                            <option value="auto">Auto-detect from file type</option>
                            <option value="photos">Photos</option>
                            <option value="videos">Videos</option>
                            <option value="files">Files</option>
                            <option value="recordings">Recordings</option>
                        </select>
                        <div class="form-help">
                            Choose a category or let the system auto-detect
                        </div>
                    </div>
                    
                    <div id="addContentMessage" class="form-help" style="text-align: center; margin-top: 20px;"></div>
                    
                    <button type="submit" class="btn-admin">Add to Vault</button>
                </form>
            </div>
            
            <!-- View/Delete Content -->
            <div class="instructions-box">
                <h3>Current Vault Content</h3>
                <p>Click "Refresh List" to see all content in the vault. Deleting here only removes from vault, not from Google Drive.</p>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button id="refreshContent" class="btn-admin secondary" style="max-width: 200px;">Refresh Content List</button>
                </div>
                
                <!-- Content will be loaded here -->
                <div id="contentListContainer">
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        Click "Refresh List" to load vault content
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <button id="clearAllContent" class="btn-admin delete" style="max-width: 250px;">
                        Clear All Vault Content
                    </button>
                    <div class="form-help form-warning" style="text-align: center;">
                        ⚠️ This will remove ALL content from the vault (but not from Google Drive)
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 3. INSTRUCTIONS SECTION -->
        <section id="instructionsSection" class="admin-section">
            <h2>Google Drive Instructions</h2>
            
            <div class="instructions-box">
                <h3>How to Add Google Drive Content</h3>
                
                <h4>Step 1: Upload to Google Drive</h4>
                <ol>
                    <li>Upload your file (photo, video, document, etc.) to Google Drive</li>
                    <li>Right-click the file and select "Get link"</li>
                    <li>Set link sharing to <strong>"Anyone with the link"</strong></li>
                    <li>Click "Copy link"</li>
                </ol>
                
                <h4>Step 2: Link Formats</h4>
                <p>The copied link will look like this:</p>
                <code>https://drive.google.com/file/d/FILE_ID/view</code>
                
                <p><strong>For Videos (Embeddable Player):</strong></p>
                <code>https://drive.google.com/file/d/FILE_ID/preview</code>
                
                <p><strong>For Photos/Files (Direct Download):</strong></p>
                <code>https://drive.google.com/uc?id=FILE_ID&export=download</code>
                
                <p class="form-help">Note: The admin panel will automatically convert standard links to the correct format.</p>
                
                <h4>Step 3: Add to Admin Panel</h4>
                <ol>
                    <li>Go to "Manage Content" section</li>
                    <li>Paste the Google Drive link</li>
                    <li>Enter a display name</li>
                    <li>Select category or use "Auto-detect"</li>
                    <li>Click "Add to Vault"</li>
                </ol>
                
                <h4>Important Security Notes:</h4>
                <ul>
                    <li>Files remain in YOUR Google Drive account</li>
                    <li>Only the link is stored in the vault</li>
                    <li>Deleting from vault ≠ deleting from Google Drive</li>
                    <li>Use Google Drive's security settings for file protection</li>
                    <li>You can revoke access by changing sharing settings in Google Drive</li>
                </ul>
            </div>
            
            <div class="instructions-box">
                <h3>Admin Security Tips</h3>
                <ul>
                    <li>Bookmark this page - it's not linked from the main site</li>
                    <li>Clear browser history after admin sessions on shared computers</li>
                    <li>Use a strong PIN (not the default 1234)</li>
                    <li>Regularly review and clean vault content</li>
                    <li>Log out of Google Drive on shared devices</li>
                </ul>
            </div>
        </section>
        
        <!-- Back to Calculator Link -->
        <div class="back-link">
            <a href="index.html">← Back to Calculator</a>
        </div>
    </div>
    
    <!-- JavaScript Files -->
    <script src="js/vault.js" defer></script>
    <script src="js/drive-handler.js" defer></script>
    <script src="js/admin.js" defer></script>
    
    <script>
        // Navigation script
        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.admin-nav-btn');
            const sections = document.querySelectorAll('.admin-section');
            
            navButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetSection = this.dataset.section;
                    
                    // Update active button
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show target section
                    sections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection + 'Section') {
                            section.classList.add('active');
                        }
                    });
                });
            });
        });
    </script>
</body>
    </html>
